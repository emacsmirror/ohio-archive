<HTML>
<HEAD>
<TITLE>Atoms: Program Notes</TITLE>
</HEAD>
<BODY>
<A HREF="atoms-5.html">Previous</A>
<A HREF="atoms-7.html">Next</A>
<A HREF="atoms.html#toc6">Table of Contents</A>
<HR>
<H2><A NAME="s6">6. Program Notes</A></H2>



<H2><A NAME="ss6.1">6.1 Acknowledgments</A></H2>


<P>I would like to thank my many colleagues who have been a source of
help and inspiration.  The support of Profs. Ed Stern and John Rehr
has always been appreciated.  I would like to thank Chuck Bouldin,
Boyan Boyanovich, Julie Cross, Tim Elam, Matt Newville, Hans Stragier,
Kalle Voss, Steve Zabinsky, and Yanjun Zhang for their contributions,
helpful criticism and useful suggestions as I have developed this
program.</P>
<P>The essential calculation in this program is handled in the routine
<CODE>equipt</CODE>, which decodes the Hermann-Maguin notation and performs
the proscribed symmetry operations on the input atomic coordinates.
This routine was written by H. Burzlaff and A. Hountas and is in the
public domain. Several parts of this program were inspired by the
program <SF>sexie</SF> by Bernhard Rupp.  <SF>sexie</SF> uses input files that
are similar to <CODE>atoms.inp</CODE> and its database is a good resource for
composing <CODE>atoms.inp</CODE> files.  The original version of the routine
<CODE>mucal</CODE> was written by P. Bandyopadhyay using data from
<I>Compilation of X-Ray Cross Section</I> by McMaster et. al.  Several
of the character string manipulation routines (<CODE>triml, istrln,
upper, lower, bwords</CODE>) were written by S.I. Zabinsky and M. Newville
and released for this use.</P>




<H2><A NAME="ss6.2">6.2 Comments on the Fortran Code</A></H2>



<P>Every routine used by <SF>atoms</SF> has been written in ANSI standard
Fortran-77.  At the time of this writing the code has been found to
compile and run under many difffernt operating systems.  Presently,
the code is developed on an Intel 486 laptop which runs Linux using
F2C and GCC for compilation.  The code is thus easily ported to any
machine with a Fortran compiler.  The author has run <SF>atoms</SF> under
four different unixes, MS-DOS, Macintosh System 7.5, Vax-VMS, and
Open-VMS on an DEC Alpha.  At this time, there are four caveats for
the user:</P>
<P>
<OL>
<LI>In the main program, the unit for the output files are opened
with status <CODE>unknown</CODE>. On VMS machines, it is more convenient, but
not necessary, to open files with <CODE>new</CODE> status to take advantage of
multiple versions of files.  To change this for use on a Vax-VMS
machine, search for the line in the main program where the variable
<CODE>vaxflg</CODE> is defined and change it to <CODE>.true.</CODE>
</LI>
<LI>All run-time messages are written by the subroutine
<CODE>messag</CODE>. Thus if your machine has particular requirements for
writing to standard output, <CODE>messag</CODE> should be the only routine
that you need to alter.
</LI>
<LI>Tab characters are allowed in the input file, even though the
handling of tab characters might be machine specific.  This is done by
reading a line from the input file and filtering it through a
subroutine called <CODE>untab</CODE>, which replaces tab characters with blank
spaces.  <CODE>untab</CODE> is written assuming tab is ASCII character 9.  If
your machine handles this differently, you only need to edit
<CODE>untab</CODE> or simply don't use tabs.
</LI>
<LI>The character string manipulation assumes the ASCII character
set.  If your machine does not use ASCII, then you are probably
familiar with how to alter code for use on your machine.  Contact the
author for which subroutines need to be altered.</LI>
</OL>
</P>
<P>If you ever have a problem with carriage-control while using
<SF>atoms</SF> or <SF>feff</SF> with a <CODE>feff.inp</CODE> file generated by
<SF>atoms</SF>, please contact the author.</P>
<P><SF>atoms</SF> is delivered with the following parameter values: 
<OL>
<LI> <CODE>iat = 20</CODE>, maximum number of unique atoms</LI>
<LI> <CODE>natx = 800</CODE>, maximum number of atoms in cluster</LI>
<LI> <CODE>ntitx = 9</CODE>, maximum number of title lines</LI>
<LI> <CODE>maxln = 800</CODE>, maximum number of atoms in <CODE>feff.inp</CODE></LI>
</OL>
</P>
<P><SF>feff</SF> limits the size of the cluster in its calculation to 400
atoms. In <SF>atoms</SF> these values are imposed by parameter
statements, thus are easy to change.  Global parameters such as these
are set in the main program and passed as arguments to the rest of the
program.  Find these near the beginning of the main program and change
them to whatever value you want.  If you do not know exactly how to do
this but still think you need to, consult your local Fortran guru or,
if you must, the author. </P>
<P>The source code for <SF>atoms</SF> is written in a style with mostly lower
case characters.  All executable statements are written in lower case.
This is a departure from strict adherence to the ANSI standard.
Care has been taken to make the code insensitive to case.  That is, the
source may be placed in all upper case or all lower case without
damaging its functionality.  The algorithm that parses the input file
is certainly insensitive to case.</P>



<H2><A NAME="ss6.3">6.3 What is new since version 2.42</A></H2>


<P>
<OL>
<LI> Correct handling of hexagonal space groups.  This is the
most important new feature.  My chagrined thanks to the <B>many</B>
people who discovered this little problem and took the time to tell me
about it.  I also improved handling of trigonal and rhombohedral space
groups.
</LI>
<LI> Support for notations of all settings of orthorhombic,
tetragonal, and monoclinic space groups.  <I>atoms</I> is now fully
compliant with all Hermann-Maguin short notations as specified in
<I>The International Tables of X-Ray Crystallography</I>, 1969 edition. 
</LI>
<LI> Better recognition of Schoenflies notation.
</LI>
<LI> Improved error messages.  Hopefully my error messages are now
more informative and spelled correctly.
</LI>
<LI> Improvements to the calculations using the McMaster tables.  I
have also corrected a few incorrect values that have been found in the
electronic version of the McMaster tables.
</LI>
<LI> Addition of <CODE>p1</CODE> and <CODE>krypton</CODE> keywords.
</LI>
<LI> Improved writing of <CODE>geom.dat</CODE> files.
</LI>
<LI> Improved handling of input and output filenames.
</LI>
<LI> Allow L1 and L2 edges for <CODE>feff.inp</CODE>.
</LI>
<LI> Writing of five digits after the decimal places in <CODE>feff.inp</CODE>.
This matches the precision of <I>feff</I>'s degeneracy checker.
</LI>
<LI> Writing of edge energy in the <CODE>HOLE</CODE> line of <CODE>feff.inp</CODE>.
This is for informational purposes only, it serves no purpose in
<I>feff</I>. </LI>
</OL>
</P>


<H2><A NAME="ss6.4">6.4 Naming Conventions</A></H2>


<P>Between versions 2.41 and 2.42, my program had a name change.  Earlier
versions were called <SF>atom</SF>, while later versions are called
<SF>atoms</SF>, with an <SF>s</SF>.  The reason for this change was to avoid
confusion with the subroutine <CODE>atom</CODE> that is an important part of
<SF>feff</SF>.  Hopefully this reduces confusion rather than adds to it!
For now, the version number is incremented by 0.01 when minor
functionality is added and by 0.1 when major functionality is added.
Bug corrections have been denoted with an incrementing letter appended
to the version number.</P>



<H2><A NAME="ss6.5">6.5 Obtaining New Copies of Feff or of the UWXAFS Analysis</A>Programs</H2>



<P>If you do not have a license to use the UWXAFS analysis
programs or <SF>feff</SF> and are interested in obtaining one contact:
<BLOCKQUOTE><CODE>
<PRE>
Ed Stern
c/o UWXAFS Project 
University of Washington 
Department of Physics, FM-15 
Seattle WA, 98195, USA 
phone: (206) 543-2023 
fax: (206) 543-0635 
electronic mail: stern@phys.washington.edu 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>or </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
John Rehr
c/o Feff Project 
University of Washington 
Department of Physics, FM-15 
Seattle WA, 98195, USA 
phone: (206) 543-8593 
fax: (206) 543-0635 
electronic mail: jjr@phys.washington.edu 
</PRE>
</CODE></BLOCKQUOTE>

You should request copies of the licensing agreements for <SF>feff</SF>
and the UWXAFS programs.  These are licensed separately.  <SF>atoms</SF>
is distributed with both packages.</P>



<H2><A NAME="ss6.6">6.6 Bibliography</A></H2>


<P>
<OL>
<LI> Burzlaff, H. and A. Hountas. <I>J. Appl. Cryst.</I> v.15, 
p.464 (1982)
</LI>
<LI> Cullity, B.D., <I>Elements of X-Ray Diffraction</I> 
Addison-Wesley, Reading, MA, 1978
</LI>
<LI> Gay, P.  <I>The Crystalline State</I>, 
Oliver and Boyd, Edinburgh (1972)
</LI>
<LI> Henry, N.F.M. and K. Lonsdale, eds. <I>The International
Tables For X-Ray 
Crystallography</I>, v.I, The Kynoch Press, Birmingham, England (1969)
</LI>
<LI> Ibers, J.A. and W.C. Hamilton, eds. <I>The International
Tables For X-Ray 
Crystallography</I>, v.IV, The Kynoch Press, Birmingham, England (1969)
</LI>
<LI> McMaster, W.H. et al. <I>Compilation of X-Ray Cross
Sections</I> (LRL, UCRL-50174, sec.2 rev.1969.)
</LI>
<LI> Phillips, F.C. <I>An Introduction To Crystallography</I>, 
John Wiley and Sons, Inc. (1971)
</LI>
<LI> Ravel, B., M. Newville, J.O. Cross, and C.E. Bouldin, 
Physica B, 208&amp;209 (1995) 145-147.
</LI>
<LI> Rehr, J.J., R.C. Albers and S.I. Zabinsky, Phys. Rev. Lett.
<B>69</B> (1992) 3397; J.J. Rehr and R.C. Albers Phys. Rev. B  
<B>41</B> (1990) 8139; J.J. Rehr and S.I. Zabinsky program
<SF>feff</SF> and 
<A HREF="http://krazy.phys.washington.edu/Docs/Feff.doc/">documentation</A>. 
</LI>
<LI> Rupp B. program <SF>Sexie</SF> and documentation, PhysiSoft Press.
</LI>
<LI> Sorensen, L.B., et al., in <I>Resonant Anomalous X-ray  
Scattering</I>, Materlik, G., C.J. Sparks, and K. Fischer, eds.  
North Holland, Amsterdam, (1994)
</LI>
<LI> Stern, E.A. and S.M. Heald, Basic Principles and Applications
of EXAFS, ch.10 in <I>Handbook on Synchrotron Radiation, v.1</I>, 
edited by E.E. Koch, North Holland, (1983)
</LI>
<LI> Wycoff, R.W.G. <I>Crystal Structures, v.I-VI</I>, Wiley and Sons,
New York (1963)</LI>
</OL>
</P>


<H2><A NAME="ss6.7">6.7 About this document.</A></H2>

<P>This document was composed using a mark-up language called
<CODE>linuxdoc-sgml</CODE>.  This is the documentation standard of the
<A HREF="ftp://ftp.cc.gatech.edu//pub/linux/docs/linux-doc-project/LDP-Manifesto">Linux Documentation Project</A>.  <CODE>linuxdoc-sgml</CODE> is an
adaptation of the QWERTZ document type definition written by Tom
Gordon.  <CODE>linuxdoc-sgml</CODE> is available by ftp at 
<A HREF="ftp://ftp.cc.gatech.edu/pub/linux/utils/text/linuxdoc-sgml-1.2.tar.gz">ftp.cc.gatech.edu</A>.  The document type definition was altered
somewhat to meet the needs of the UWXAFS documentation.</P>
<P>The value of a Standardized General Markup Language (SGML) is that it
can be processed into any number of formats from a common source.
Using <CODE>linuxdoc-sgml</CODE>, a single marked-up file can be used to
produce LaTeX, PostScript, plain ASCII, html, TeXinfo, or dvi
documentation.</P>



<HR>
<A HREF="atoms-5.html">Previous</A>
<A HREF="atoms-7.html">Next</A>
<A HREF="atoms.html#toc6">Table of Contents</A>
</BODY>
</HTML>
